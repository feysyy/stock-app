<h1>User Management</h1>

<div>
  <p>User: <%= current_user.email %></p>
  <br>
  <%= link_to "Create User", new_admin_user_path %>
</div>

<h1>APPROVED USERS</h1>
<table>
  <thead>
    <tr>
      <th>Email </th>
      <th> Action </th>
    </tr>
  </thead>

  <tbody>
    <% @users.each do |user| %>
      <% if user.approved? %>
      <tr>
        <td> <%= user.email %> </td>
        <td> <%= link_to "View", admin_user_path(user) %> </td>
      </tr>
      <% end %>
    <% end %>
  </tbody>
</table>

<h1>PENDING USERS</h1>
<table>
  <thead>
    <tr>
      <th> Email </th>
      <th> Action </th>
    </tr>
  </thead>

  <tbody>
    <% @users.each do |user| %>
      <% unless user.approved? %>
      <tr>
        <td> <%= user.email %> </td>
        <td> <%= link_to "View", admin_user_path(user) %> </td>
      </tr>
      <% end %>
    <% end %>
  </tbody>
</table>


<br/>

<h1>HISTORY</h1>
<table>
  <thead>
    <tr>
      <th> Acronym </th>
      <th> Company Name </th>
      <th> Stock Price </th>
      <th> Quantity </th>
      <th> Total </th>
      <th> Action </th>
    </tr>
  </thead>

  <tbody>
    <% @orders.each do |order| %>
      <tr>
        <td> <%= order.stock.symbol %> </td>
        <td> <%= order.stock.company_name %> </td>
        <td> <%= order.total / order.quantity %> </td>
        <td> <%= order.quantity %> </td>
        <td> <%= number_with_precision(order.total, precision: 2) %> </td>
        <td> <%= order.order_type %> </td>
      </tr>

    <% end %>
  </tbody>
</table>

<br>
<% if user_signed_in? %>
  <%= link_to "Log-out", destroy_user_session_path, data: {
    "turbo-method": :delete,
    "turbo-confirm": "Continue" } 
  %>
<% end %>
